data:text/html,
<title>NIMBUS WEB v0.1.2</title>
<link rel="stylesheet"
    href="https://cdn.jsdelivr.net/gh/a-riceeater/ProgrammingTutorial@3a74bb6/docs/static/SyntaxHighlight.css">
<style>
    #h,.l{background-color:#282c34}.l{position:fixed;left:0;top:0;width:30px;height:100%;color:#fff;text-align:center;font-size:14px;padding-top:5px;box-sizing:border-box;line-height:1em;overflow-y:scroll;cursor:default;font-family:Menlo,Monaco,'Courier New',monospace;border-right:1px solid #d3d3d3}#h,.c{font-family:Menlo,Monaco,'Courier New',monospace;width:calc(100% - 30px);height:100%;position:fixed;left:30px;top:0;outline:0;font-size:14px;padding-top:2.5px;box-sizing:border-box;line-height:1em;border:none;padding-left:5px}.l::-webkit-scrollbar{display:none}.c{background-color:transparent;color:transparent;z-index:3;caret-color:lightgray}.c::selection{background-color:rgb(211,211,211,.35)}#h{color:#d3d3d3;z-index:2}
</style>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/a-riceeater/DataCodeEditor@latest/atom.css">
<script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/highlight.min.js"></script>

<div class="l"></div>
<pre>
        <div id="h"></div>
    </pre>
<textarea class="c" placeholder="CTRL+S: OPEN PAGE OUTPUT | CTRL+SHIFT+S: SAVE AS FILE" autofocus spellcheck="false"
    autocomplete="off" autocapitalize="false"></textarea>
<script>
    const lang = prompt('What language are you coding in?').trim();
    const h = document.querySelector("#h");
    const e = document.querySelector(".c");
    const l = document.querySelector(".l");
    var wl;
    h.addEventListener("scroll", (a) => {
        const st = a.target.scrollTop;
        e.scrollTop = st;
        l.scrollTop = st;
        e.scrollLeft = a.target.scrollLeft;
    })
    e.addEventListener("scroll", (a) => {
        const st = a.target.scrollTop;
        h.scrollTop = st;
        l.scrollTop = st;
        h.scrollLeft = a.target.scrollLeft;
    })
    l.addEventListener("scroll", (a) => {
        const st = a.target.scrollTop;
        h.scrollTop = st;
        e.scrollTop = st;
    })

    const ins = (ch) => {
        const sp = e.selectionStart;
        const ep = e.selectionEnd;

        e.value = e.value.substring(0, sp) + ch + e.value.substring(ep);
        e.selectionStart = e.selectionEnd = sp + ch.length - 1;
        e.focus();
    };

    e.addEventListener("keydown", (a) => {
        if (a.key == "Tab") a.preventDefault();


        if (a.ctrlKey || a.metaKey && a.shiftKey && a.key == "s") {
            const ae = document.createElement("a");
            ae.download = prompt("file name? (with ext.)");
            ae.href=URL.createObjectURL(new Blob([e.value], {type:'text/plain'}));
            ae.click();
        }
        else if (a.ctrlKey || a.metaKey && a.key == "s") {
            a.preventDefault();
            if (wl) wl.close();
            const w = window.open();
            w.document.write(e.value);
            wl = w;
        }
        
        setTimeout(() => {
            var ta = a.target;

            switch (a.key) {
                case "Tab":
                    ins('    ')
                    break
                case "{":
                    ins("}")
                    break
                case "[":
                    ins("]")
                    break
                case "(":
                    ins(")")
                    break
                case "\"":
                    ins("\"")
                    break
                case "\'":
                    ins("\'")
                    break
                case "\`":
                    ins("\`")
                    break
            }

            h.innerHTML = hljs.highlight(ta.value, { language: lang }).value || ta.value;
            const st = ta.scrollTop;
            l.scrollTop = st;
            h.scrollTop = st;
            h.scrollLeft = ta.scrollLeft;

            let ld = "";
            let ln = ta.value.split("\n").length;
            for (let i = 0; i < ln; i++) { ld += `${i + 1}<br>` }
            l.innerHTML = ld;
        })
    })
</script>
